## Язык программирования

Поддерживается только операционной системой Windows, так как есть функции, не поддерживаемые другими (sprintf_s). Для использования функций вывода дерева выражения необходима программа graphviz.

Исполняемый файл можно получить с помощью команды 
```
make
```
Для исполнения необходимо иметь в основной папке txt файл с кодом на языке. Запуск командой 
```
./soviet_lang filename.txt
```

### Основные факты о синтаксисе языка:
1. синтаксис довольно схож с синтаксисом языка. Но операции называются по-другому.
2. Переменные начинаются с символа `*`. Все они могут представлять только целые числа.
3. В конце выражения ставится точка. 
4. Поддерживаются циклы (видов for и while) и условные проверки (видов if, else if и else), тело которых сожет содержать как одну строку кода, так и несколько, во втором случае нужно обособить строки скобками - `!`.
5. Также поддерживаются функции, переменные в которых глобальные. В дальнейшем код будет усовершенствован, чтобы переменные в функции могли быть локальными.
6. Код завершается концевой функцией - `@1991`. 

#### Названия операции и функций:

|   Операция или функция  | Название         |
|:-----------------------:|:----------------:|
| +                       | darim            |
| -                       | grabim           |
| *                       | kniga            |
| /                       | religia          |
| =                       | ravenstvo        |
| -                       | Уменьшение       |
| >                       | PSDRPB           |
| <                       | RSDRPM           |
| >=                      | polon            |
| <=                      | pust             |
| do_teh_por              | while            |
| v_techenie              | for              |
| slovo                   | print            |


Для большей ясности приведу пример кода и его интерпретацию на языке c.

`int num = 5;
int res = 1;
int cnt = 1;

while (cnt <= num)
{
    res = res * cnt;
    cnt = cnt + 1;
}
printf("%d\n", res);
return;`

`*num ravenstvo 5.
*res ravenstvo 1.
*cnt ravenstvo 1.

do_teh_por ! *cnt pust *num !
!
    *res ravenstvo *res kniga *cnt.
    *cnt ravenstvo *cnt darim 1.
!
.
slovo *res
@1991`

Это один из примеров текста для программы, она считает факториал числа с помощью цикла while. Еще несколько примеров есть в папке tests: программа, высчитывающая корни квадратного уравнения (пример использования функций) и программа, считающая факториал с помощью цикла for (пример кода с однострочным телом цикла).

### Текст кода проходит три основные стадии:

1. Входной файл обрабатывается и преобразовывается в дерево выражении - frontend
2. Дерево опитимизируется - middle-end
3. Дерево преобразовывается сначала в асссемблерный, а затем в бинарный файлы - backend

Затем может быть запущена обработка бинарного файла процессором.

#### Frontend

Вся обработка делится на два этапа - лексический и синтаксический анализ текста.

Во время лексического анализа из текста выделяются токены - смысловые элементы программы - операции, числа и отдельно функции и переменные. Для функций и переменные используется таблица id.

Синтаксический анализ работает на основе рекурсивного спуска. Во время этого проходит проверка правильности кода, про выявлении синтаксической ошибки программа будет остановлена. Получается дерево подобного вида:

![image](https://github.com/gnnpdr/lang/raw/main/image/image.jpeg)

#### Middle-end

Полученное дерево оптимизируется. Прогамма преобразовывает операции и локально подсчитывает выражения.

#### Backend

Прогамма преобразовывает части дерева в ассемблерный код. Ассемблерные функции подходят для написанного мною ранее процессора.